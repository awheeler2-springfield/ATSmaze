<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ATS Resume Maze</title>

<style>
body{
  margin:0;
  background:#f3f3f3;
  font-family: Georgia, serif;
}

.rail{
  position:fixed;
  left:0; top:0;
  width:280px;
  height:100vh;
  background:#fff;
  border-right:1px solid #ddd;
  padding:15px;
  overflow:auto;
}

.page{
  margin-left:280px;
  padding:30px;
}

.resume{
  background:#fff;
  padding:40px 60px;
  max-width:900px;
  margin:auto;
  box-shadow:0 2px 10px rgba(0,0,0,.08);
}

.section{
  margin-top:30px;
}

.section-title{
  font-weight:bold;
  border-bottom:1px solid #000;
  margin-bottom:10px;
  padding-bottom:4px;
}

.node{
  display:inline-block;
  padding:2px 4px;
  cursor:pointer;
  border-radius:3px;
}

.active{ background:#ffe86a; }
.visited{ background:#ffe86a; opacity:.9; }
.trap{ background:#ff8a8a; }
.neighbor{ outline:1px solid #6aa9ff; }

button{
  margin-top:10px;
  padding:6px 10px;
}
</style>
</head>
<body>

<div class="rail">
  <h3>ATS Resume Maze</h3>
  <p>Move in order:</p>
  <p>SUMMARY → SKILLS → EXPERIENCE → EDUCATION</p>
  <p id="stats">Moves: 0 | Traps: 0 | Score: 100</p>
  <div id="report"></div>
  <button onclick="resetGame()">New Round</button>
</div>

<div class="page">
<div class="resume" id="resume"></div>
</div>

<script>
let nodes = [];
let edges = {};
let current = null;
let moves = 0;
let traps = 0;
let stage = 0;
let order = ["summary","skills","experience","education"];

/* ---------------------------
   BUILD RESUME
--------------------------- */

function buildResume(){
  nodes = [];
  edges = {};
  current = null;
  moves = 0;
  traps = 0;
  stage = 0;

  const resume = document.getElementById("resume");
  resume.innerHTML = "";

  createSection("SUMMARY","summary",["Data-driven","analytics","professional"]);
  createSection("SKILLS","skills",["GA4","SEO","Skill-Bars"]);
  createExperience();
  createSection("EDUCATION","education",["B.A."]);

  updateStats();
}

function createSection(title,key,words){
  const div = document.createElement("div");
  div.className = "section";

  const h = document.createElement("div");
  h.className = "section-title";
  h.textContent = title;
  div.appendChild(h);

  words.forEach(word=>{
    let span = createNode(word,key,word==="Skill-Bars");
    div.appendChild(span);
  });

  document.getElementById("resume").appendChild(div);
}

function createExperience(){
  const div = document.createElement("div");
  div.className = "section";

  const h = document.createElement("div");
  h.className = "section-title";
  h.textContent = "EXPERIENCE";
  div.appendChild(h);

  for(let i=0;i<20;i++){
    let word = Math.random()<0.2 ? "TABLE" : "optimized";
    let trap = word==="TABLE";
    div.appendChild(createNode(word,"experience",trap));
  }

  document.getElementById("resume").appendChild(div);
}

function createNode(text,section,isTrap=false){
  const span = document.createElement("span");
  span.className = "node";
  span.textContent = text + " ";
  span.dataset.section = section;
  span.dataset.id = nodes.length;

  nodes.push(span);
  edges[nodes.length-1] = [];

  span.addEventListener("click",()=>handleClick(nodes.length-1));
  return span;
}

/* ---------------------------
   GAME LOGIC
--------------------------- */

function handleClick(id){
  if(current === null){
    activate(id);
    highlightNeighbors(id);
    return;
  }

  if(Math.abs(id-current) === 1){
    move(id);
  }
}

function move(id){
  moves++;
  activate(id);

  if(nodes[id].textContent.includes("TABLE") || 
     nodes[id].textContent.includes("Skill-Bars")){
    nodes[id].classList.add("trap");
    traps++;
  }

  if(nodes[id].dataset.section === order[stage]){
    stage++;
  }

  updateStats();
  highlightNeighbors(id);

  if(stage === order.length){
    document.getElementById("report").innerHTML =
      "<h4>Resume Parsed</h4><p>Structural clarity achieved.</p>";
  }
}

function activate(id){
  nodes.forEach(n=>n.classList.remove("active"));
  nodes[id].classList.add("active","visited");
  current = id;
}

function highlightNeighbors(id){
  nodes.forEach(n=>n.classList.remove("neighbor"));
  if(id>0) nodes[id-1].classList.add("neighbor");
  if(id<nodes.length-1) nodes[id+1].classList.add("neighbor");
}

function updateStats(){
  let score = Math.max(0,100 - traps*15 - Math.floor(moves/5));
  document.getElementById("stats").textContent =
    `Moves: ${moves} | Traps: ${traps} | Score: ${score}`;
}

function resetGame(){
  document.getElementById("report").innerHTML="";
  buildResume();
}

buildResume();
</script>

</body>
</html>
