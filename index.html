<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ATS Resume Maze â€” Experience Cluster</title>

<style>
body { font-family: Arial; margin: 0; display: flex; height: 100vh; }
#rail { width: 320px; background: #1D3461; color: white; padding: 20px; box-sizing: border-box; }
#maze { flex: 1; display: grid; grid-template-columns: repeat(4, 190px); gap: 18px; justify-content: center; align-content: center; background: #f5f5f5; }

.node {
  background: white;
  border: 2px solid #ccc;
  padding: 10px;
  text-align: center;
  cursor: pointer;
  font-weight: bold;
}

.visited { background: #FFFBF0; border-color: #C96A00; }
.current { background: #F0FAFB; border-color: #0A6E6E; }
.available { border-color: #0A6E6E; }
.disabled { pointer-events: none; opacity: 0.5; }

#diagnostic { margin-top: 20px; font-size: 0.9rem; }
</style>
</head>
<body>

<div id="rail">
  <h2>ATS Resume Maze</h2>
  <p><strong>Moves:</strong> <span id="moveCount">0</span></p>
  <p><strong>Score:</strong> <span id="score">100</span></p>
  <div id="diagnostic"></div>
</div>

<div id="maze">
  <div class="node" id="header">Header</div>
  <div class="node" id="summary">Summary</div>
  <div class="node" id="skills">Skills</div>

  <div class="node" id="experience_intro">Experience Intro</div>
  <div class="node" id="bullet_style">Bullet Structure</div>
  <div class="node" id="weak_verbs">Weak Verbs</div>
  <div class="node" id="strong_verbs">Strong Action Verbs</div>
  <div class="node" id="no_metrics">No Metrics</div>
  <div class="node" id="with_metrics">Quantified Impact</div>
  <div class="node" id="generic_alignment">Generic Experience</div>
  <div class="node" id="tailored_alignment">Tailored to Job</div>

  <div class="node" id="projects">Projects</div>
  <div class="node" id="certifications">Certifications</div>
  <div class="node" id="education">Education</div>
</div>

<script type="module">

/* =========================
   GRAPH (Conceptual)
========================= */

const graph = {

  header: ["summary"],
  summary: ["skills"],
  skills: ["experience_intro"],

  experience_intro: ["bullet_style"],

  bullet_style: ["weak_verbs", "strong_verbs"],

  weak_verbs: ["strong_verbs"],

  strong_verbs: ["no_metrics", "with_metrics"],

  no_metrics: ["with_metrics"],

  with_metrics: ["generic_alignment", "tailored_alignment"],

  generic_alignment: ["tailored_alignment"],

  tailored_alignment: ["projects"],

  projects: ["certifications"],
  certifications: ["education"],
  education: []
};

/* =========================
   TRAP DEFINITIONS
========================= */

const trapExplanations = {
  weak_verbs: "Using passive or vague verbs weakens ATS keyword strength.",
  no_metrics: "Lack of quantifiable results reduces match scoring.",
  generic_alignment: "Experience not tailored to job description lowers ranking."
};

/* =========================
   STATE
========================= */

function createInitialState() {
  return {
    currentNode: "header",
    visited: new Set(["header"]),
    moves: 0,
    trapsHit: new Set(),
    complete: false
  };
}

const state = createInitialState();

/* =========================
   ENGINE
========================= */

function attemptMove(state, targetNode) {
  if (state.complete) return { success: false };

  if (!graph[state.currentNode].includes(targetNode)) {
    return { success: false };
  }

  state.moves++;
  state.currentNode = targetNode;
  state.visited.add(targetNode);

  if (trapExplanations[targetNode]) {
    state.trapsHit.add(targetNode);
  }

  if (targetNode === "education") {
    state.complete = true;
  }

  return { success: true };
}

function calculateScore(state) {
  return Math.max(0, 100 - state.moves - (state.trapsHit.size * 10));
}

/* =========================
   RENDER
========================= */

function render(state) {
  document.querySelectorAll(".node").forEach(el => {
    el.classList.remove("visited","current","available","disabled");
    el.classList.add("disabled");
  });

  state.visited.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.classList.add("visited");
  });

  const currentEl = document.getElementById(state.currentNode);
  currentEl.classList.add("current");

  graph[state.currentNode].forEach(id => {
    const el = document.getElementById(id);
    if (el) {
      el.classList.remove("disabled");
      el.classList.add("available");
    }
  });
}

/* =========================
   RAIL + DIAGNOSTIC
========================= */

function updateRail(state) {
  document.getElementById("moveCount").textContent = state.moves;
  document.getElementById("score").textContent = calculateScore(state);

  if (state.complete) showDiagnostic(state);
}

function showDiagnostic(state) {
  let message = "<h3>ATS Diagnostic Report</h3>";

  if (state.trapsHit.size === 0) {
    message += "<p>You optimized Experience structure and alignment effectively.</p>";
  } else {
    state.trapsHit.forEach(trap => {
      message += `<p><strong>${trap.replace("_"," ")}</strong>: ${trapExplanations[trap]}</p>`;
    });
  }

  document.getElementById("diagnostic").innerHTML = message;
}

/* =========================
   INIT
========================= */

render(state);
updateRail(state);

document.querySelectorAll(".node").forEach(node => {
  node.addEventListener("click", () => {
    const result = attemptMove(state, node.id);
    if (result.success) {
      render(state);
      updateRail(state);
    }
  });
});

</script>
</body>
</html>
